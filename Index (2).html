<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××œ×•×£ ×”××ª××˜×™×§×” ×©×œ ×¢×™×“×• ğŸ¯âš¡</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Hebrew:wght@300;400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans Hebrew', sans-serif;
            background: linear-gradient(45deg, #00d2ff 0%, #3a7bd5 50%, #00b09b 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        .math-text {
            direction: ltr;
            display: inline-block;
            font-family: 'Arial', sans-serif;
            font-weight: bold;
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            color: #00ff88;
            font-size: 20px;
            animation: twinkle 2s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 2.5em;
            color: #1e3a8a;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            color: #059669;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .trophy {
            text-align: center;
            font-size: 4em;
            margin: 20px 0;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .progress {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            border: 3px solid #00d2ff;
            box-shadow: 0 4px 15px rgba(0, 210, 255, 0.3);
        }
        
        .progress-text {
            color: #1e3a8a;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .screen {
            display: none;
        }
        
        .screen.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ×›×¤×ª×•×¨×™ ×¡×˜×˜×•×¡ - ×¢×™×¦×•×‘ ×›×—×•×œ-×™×¨×•×§ */
        .status-cards {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .status-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(240,253,255,0.95));
            border: 3px solid #00d2ff;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            min-width: 150px;
            box-shadow: 0 8px 25px rgba(0, 210, 255, 0.3);
        }
        
        .status-number {
            font-size: 3em;
            font-weight: bold;
            color: #1e3a8a;
            margin-bottom: 10px;
        }
        
        .status-label {
            font-size: 1.2em;
            color: #059669;
            font-weight: bold;
        }
        
        /* ×›×¤×ª×•×¨×™ × ×•×©××™× - ×¢×™×¦×•×‘ ×›×—×•×œ-×ª×›×œ×ª-×™×¨×•×§ */
        .subjects-container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .subject-button {
            width: 100%;
            background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 30%, #00b09b 70%, #00ff88 100%);
            border: none;
            border-radius: 25px;
            padding: 25px 30px;
            margin-bottom: 20px;
            color: white;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(0, 210, 255, 0.4);
            text-align: center;
            font-family: 'Noto Sans Hebrew', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80px;
        }
        
        .subject-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 210, 255, 0.5);
            background: linear-gradient(135deg, #00b8e6 0%, #3366cc 30%, #009688 70%, #00e676 100%);
        }
        
        .subject-title {
            font-size: 1.5em;
            margin-bottom: 8px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .subject-description {
            font-size: 0.9em;
            opacity: 0.95;
            line-height: 1.3;
        }
        
        /* ×›×¤×ª×•×¨×™ ×¨××ª ×§×•×©×™ */
        .difficulty-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            max-width: 500px;
            margin: 20px auto;
        }
        
        .difficulty-button {
            background: linear-gradient(135deg, #0ea5e9, #0284c7, #0369a1);
            border: none;
            border-radius: 20px;
            padding: 25px;
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(14, 165, 233, 0.3);
            text-align: center;
            font-family: 'Noto Sans Hebrew', sans-serif;
        }
        
        .difficulty-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(14, 165, 233, 0.4);
            background: linear-gradient(135deg, #0c94d6, #026aa7, #025a8a);
        }
        
        .back-button {
            background: linear-gradient(135deg, #10b981, #059669);
            border: none;
            border-radius: 15px;
            padding: 15px 25px;
            color: white;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
            font-family: 'Noto Sans Hebrew', sans-serif;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .back-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }
        
        /* ××¡×š ×”××©×—×§ */
        .game-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 15px 35px rgba(0, 210, 255, 0.2);
            border: 3px solid #00d2ff;
        }
        
        .question-container {
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            border: 2px solid #00acc1;
        }
        
        .question-text {
            font-size: 1.3em;
            color: #1e3a8a;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .answers-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .answer-button {
            background: linear-gradient(135deg, #67e8f9, #06b6d4);
            border: none;
            border-radius: 15px;
            padding: 15px 20px;
            font-size: 1.1em;
            font-weight: bold;
            color: #1e3a8a;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(6, 182, 212, 0.3);
        }
        
        .answer-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(6, 182, 212, 0.4);
            background: linear-gradient(135deg, #22d3ee, #0891b2);
        }
        
        .answer-button.correct {
            background: linear-gradient(135deg, #34d399, #10b981);
            color: white;
            animation: correctAnswer 0.6s ease;
        }
        
        .answer-button.wrong {
            background: linear-gradient(135deg, #f87171, #ef4444);
            color: white;
            animation: wrongAnswer 0.6s ease;
        }
        
        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes wrongAnswer {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }
        
        .feedback {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            border: 2px solid #00d2ff;
            display: none;
        }
        
        .feedback.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .feedback.correct {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            color: #047857;
        }
        
        .feedback.wrong {
            background: linear-gradient(135deg, #fecaca, #fbb6ce);
            color: #dc2626;
        }
        
        .next-button {
            background: linear-gradient(135deg, #0ea5e9, #0284c7);
            border: none;
            border-radius: 15px;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(14, 165, 233, 0.3);
            margin: 15px;
        }
        
        .next-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(14, 165, 233, 0.4);
        }
        
        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .firework {
            position: absolute;
            font-size: 30px;
            animation: explode 1s ease-out forwards;
        }
        
        @keyframes explode {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            100% { transform: scale(2) rotate(360deg); opacity: 0; }
        }
        
        /* SVG ×‘×’××•××˜×¨×™×” */
        .geometry-visual {
            margin: 20px 0;
            text-align: center;
        }
        
        .geometry-visual svg {
            border: 2px solid #0284c7;
            border-radius: 10px;
            background: white;
            box-shadow: 0 5px 15px rgba(2, 132, 199, 0.2);
        }
        
        /* ××¡×š ×¡×™×•× */
        .completion-screen {
            text-align: center;
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
            border-radius: 20px;
            padding: 40px;
            margin: 20px 0;
            border: 3px solid #00acc1;
        }
        
        .completion-title {
            font-size: 2em;
            color: #1e3a8a;
            margin-bottom: 20px;
        }
        
        .completion-message {
            font-size: 1.2em;
            color: #1e3a8a;
            margin-bottom: 30px;
        }
        
        .restart-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .restart-button {
            background: linear-gradient(135deg, #0ea5e9, #0284c7);
            border: none;
            border-radius: 15px;
            padding: 15px 25px;
            color: white;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Sans Hebrew', sans-serif;
            box-shadow: 0 5px 15px rgba(14, 165, 233, 0.3);
        }
        
        .restart-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(14, 165, 233, 0.4);
        }
        
        /* ×¨×¡×¤×•× ×¡×™×‘×™×•×ª */
        @media (max-width: 600px) {
            .answers-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .status-cards {
                flex-direction: column;
                align-items: center;
            }
            
            .restart-buttons {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ ××œ×•×£ ×”××ª××˜×™×§×” ×©×œ ×¢×™×“×• âš¡</h1>
            <div class="subtitle">ğŸŒŠ â­ ×‘×¨×•×š ×”×‘× ×œ××§×“××™×” ×”××ª××˜×™×ª ×©×œ×™! â­ ğŸŒŠ</div>
            <div class="trophy">ğŸ†</div>
        </div>
        
        <!-- ××¡×š ×‘×—×™×¨×ª × ×•×©× -->
        <div class="screen active" id="subjectSelection">
            <div class="status-cards">
                <div class="status-card">
                    <div class="status-number">0</div>
                    <div class="status-label">×ª×©×•×‘×•×ª × ×›×•× ×•×ª</div>
                </div>
                <div class="status-card">
                    <div class="status-number">0</div>
                    <div class="status-label">× ×§×•×“×•×ª ×›×•×—</div>
                </div>
                <div class="status-card">
                    <div class="status-number">1</div>
                    <div class="status-label">×¨××” × ×•×›×—×™×ª</div>
                </div>
            </div>
            
            <div class="subjects-container">
                <button class="subject-button" onclick="selectSubject('numbers')">
                    <div class="subject-title">ğŸ”¢ ××¡×¤×¨×™× ×˜×‘×¢×™×™×</div>
                    <div class="subject-description">×–×™×”×•×™ ××¡×¤×¨×™× ×¢×“ 1,000, ×¡×“×¨×•×ª ×•××™×§×•× ×¢×œ ×™×©×¨ ×”××¡×¤×¨×™×</div>
                </button>
                
                <button class="subject-button" onclick="selectSubject('operations')">
                    <div class="subject-title">â• â– âœ–ï¸ â— ×¤×¢×•×œ×•×ª ×—×©×‘×•×Ÿ</div>
                    <div class="subject-description">×—×™×‘×•×¨ ×¢× ×”×‘×¨×”, ×—×™×¡×•×¨ ×¢× ×¤×¨×™×¡×”, ×œ×•×— ×”×›×¤×œ ×•×—×™×œ×•×§</div>
                </button>
                
                <button class="subject-button" onclick="selectSubject('geometry')">
                    <div class="subject-title">ğŸ“ ×’××•××˜×¨×™×” ××ª×§×“××ª</div>
                    <div class="subject-description">×–×•×•×™×•×ª ×•××©×•×œ×©×™× ×‘×¦×™×•×¨ ×¢× ××œ×•×£ ×”××ª××˜×™×§×”</div>
                </button>
            </div>
        </div>
        
        <!-- ××¡×š ×‘×—×™×¨×ª ×¨××ª ×§×•×©×™ -->
        <div class="screen" id="difficultySelection">
            <button class="back-button" onclick="backToSubjects()">
                â† ×—×–×¨×” ×œ×‘×—×™×¨×ª × ×•×©×
            </button>
            
            <div class="progress">
                <div class="progress-text" id="subjectTitle">×‘×—×¨ ×¨××ª ×§×•×©×™ ×¢×‘×•×¨ ×”× ×•×©× ×©×œ×š âš¡</div>
            </div>
            
            <div class="difficulty-grid">
                <button class="difficulty-button" onclick="selectDifficulty('easy')">
                    â­ ×¨××” ×§×œ×”<br>×”×ª×—×œ×” ×—×–×§×” ×•××¢×¦×™××”
                </button>
                <button class="difficulty-button" onclick="selectDifficulty('medium')">
                    â­â­ ×¨××” ×‘×™× ×•× ×™×ª<br>××ª×’×¨ ××¢× ×™×™×Ÿ ×•××ª×•×Ÿ
                </button>
                <button class="difficulty-button" onclick="selectDifficulty('hard')">
                    â­â­â­ ×¨××” ×§×©×”<br>××ª×’×¨ ×œ××œ×•×¤×™ ×”××ª××˜×™×§×”!
                </button>
            </div>
        </div>
        
        <!-- ××¡×š ×”××©×—×§ -->
        <div class="screen" id="gameScreen">
            <div class="game-content">
                <button class="back-button" onclick="backToDifficulty()">
                    â† ×—×–×¨×” ×œ×‘×—×™×¨×ª ×¨××”
                </button>
                
                <div class="progress">
                    <div class="progress-text" id="questionProgress">×©××œ×” 1 ××ª×•×š 30</div>
                </div>
                
                <div class="question-container">
                    <div class="question-text" id="questionText">×˜×•×¢×Ÿ ×©××œ×”...</div>
                    <div class="geometry-visual" id="geometryVisual" style="display: none;"></div>
                    <div class="answers-grid" id="answersGrid"></div>
                </div>
                
                <div class="feedback" id="feedback">
                    <div class="feedback-text" id="feedbackText"></div>
                    <button class="next-button" onclick="nextQuestion()" id="nextButton">
                        ×”××©×š ×œ×©××œ×” ×”×‘××” âš¡
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ××¡×š ×¡×™×•× -->
        <div class="screen" id="completionScreen">
            <div class="completion-screen">
                <div class="completion-title">ğŸ‰ ×›×œ ×”×›×‘×•×“ ×¢×™×“×•! ğŸ‰</div>
                <div class="completion-message" id="completionMessage">
                    ×¡×™×™××ª ×‘×”×¦×œ×—×” ××ª ×›×œ ×”×©××œ×•×ª! ××™×–×” ××œ×•×£!
                </div>
                <div class="trophy">ğŸ†âš¡</div>
                <div class="restart-buttons">
                    <button class="restart-button" onclick="restartGame()">
                        ğŸ”„ ×‘×—×¨ × ×•×©× ×—×“×©
                    </button>
                    <button class="restart-button" onclick="playAgain()">
                        ğŸ¯ ×©×—×§ ×©×•×‘ ×‘××•×ª×• × ×•×©×
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="fireworks" id="fireworks"></div>
    
    <script>
        // ××©×ª× ×™× ×’×œ×•×‘×œ×™×™×
        let currentSubject = '';
        let currentDifficulty = '';
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let answeredCorrectly = false;
        
        // ×××’×¨ ×”×©××œ×•×ª ×”××œ× ×¢× 3 × ×•×©××™× - 30 ×©××œ×•×ª ×œ×›×œ ×¨××”
        const questionBank = {
            numbers: {
                easy: [
                    // ××¡×¤×¨×™× ×˜×‘×¢×™×™× - ×¨××” ×§×œ×” (30 ×©××œ×•×ª)
                    {
                        question: "××™×–×” ××¡×¤×¨ ×‘× ××—×¨×™ 47?",
                        answers: ["46", "48", "49", "50"],
                        correct: 1,
                        explanation: "×¢×™×“×• ×”×’××•×Ÿ! ××—×¨×™ 47 ×‘× 48. ×–×” ×”××¡×¤×¨ ×”×¢×•×§×‘!"
                    },
                    {
                        question: "××™×–×” ××¡×¤×¨ ×‘× ×œ×¤× ×™ 63?",
                        answers: ["61", "62", "64", "65"],
                        correct: 1,
                        explanation: "× ×”×“×¨ ×¢×™×“×•! ×œ×¤× ×™ 63 ×‘× 62. ×–×” ×”××¡×¤×¨ ×”×§×•×“×!"
                    },
                    {
                        question: "××™×–×” ××¡×¤×¨ ×”×›×™ ×’×“×•×œ?",
                        answers: ["34", "43", "24", "42"],
                        correct: 1,
                        explanation: "××¢×•×œ×” ×¢×™×“×•! 43 ×”×•× ×”×’×“×•×œ ×‘×™×•×ª×¨!"
                    },
                    {
                        question: "××™×–×” ××¡×¤×¨ ×”×›×™ ×§×˜×Ÿ?",
                        answers: ["67", "76", "57", "75"],
                        correct: 2,
                        explanation: "× ×¤×œ× ×¢×™×“×•! 57 ×”×•× ×”×§×˜×Ÿ ×‘×™×•×ª×¨!"
                    },
                    {
                        question: "×›××” ×¢×©×¨×•×ª ×™×© ×‘××¡×¤×¨ 84?",
                        answers: ["4", "8", "80", "84"],
                        correct: 1,
                        explanation: "×›×œ ×”×›×‘×•×“ ×¢×™×“×•! ×‘××¡×¤×¨ 84 ×™×© 8 ×¢×©×¨×•×ª!"
                    },
                    {
                        question: "×›××” ×™×—×™×“×•×ª ×™×© ×‘××¡×¤×¨ 59?",
                        answers: ["5", "9", "50", "90"],
                        correct: 1,
                        explanation: "××•×©×œ× ×¢×™×“×•! ×‘××¡×¤×¨ 59 ×™×© 9 ×™×—×™×“×•×ª!"
                    },
                    {
                        question: "××™×–×” ××¡×¤×¨ ×–×•×’×™?",
                        answers: ["13", "25", "36", "41"],
                        correct: 2,
                        explanation: "× ×”×“×¨ ×¢×™×“×•! 36 ×”×•× ××¡×¤×¨ ×–×•×’×™ - ×”×•× ××¡×ª×™×™× ×‘-6!"
                    },
                    {
                        question: "××™×–×” ××¡×¤×¨ ××™-×–×•×’×™?",
                        answers: ["22", "44", "37", "68"],
                        correct: 2,
                        explanation: "××¢×•×œ×” ×¢×™×“×•! 37 ×”×•× ××¡×¤×¨ ××™-×–×•×’×™ - ×”×•× ××¡×ª×™×™× ×‘-7!"
                    },
                    {
                        question: "××™×–×” ××¡×¤×¨ ×‘×™×Ÿ 20 ×œ-30?",
                        answers: ["19", "25", "31", "35"],
                        correct: 1,
                        explanation: "×¤× ×˜×¡×˜×™ ×¢×™×“×•! 25 × ××¦× ×‘×™×Ÿ 20 ×œ-30!"
                    },
                    {
                        question: "××” ×”×¢×¨×š ×©×œ ×”×¡×¤×¨×” 7 ×‘××¡×¤×¨ 73?",
                        answers: ["7", "70", "3", "30"],
                        correct: 1,
                        explanation: "× ×¤×œ× ×¢×™×“×•! ×”×¡×¤×¨×” 7 ×‘××§×•× ×”×¢×©×¨×•×ª ×©×•×•×” 70!"
                    },
                    {
                        question: "××™×–×” ××¡×¤×¨ ×”×›×™ ×§×¨×•×‘ ×œ-50?",
                        answers: ["41", "48", "55", "62"],
                        correct: 1,
                        explanation: "××“×”×™× ×¢×™×“×•! 48 ×”×•× ×”×§×¨×•×‘ ×‘×™×•×ª×¨ ×œ-50!"
                    },
                    {
                        question: "×›××” ×¦×¨×™×š ×œ×”×•×¡×™×£ ×œ-30 ×›×“×™ ×œ×§×‘×œ 35?",
                        answers: ["3", "4", "5", "6"],
                        correct: 2,
                        explanation: "×›×œ ×”×›×‘×•×“ ×¢×™×“×•! 30 + 5 = 35!"
                    },
                    {
                        question: "××™×–×” ××¡×¤×¨ ×‘× ×‘××§×•× ×”×©×œ×™×©×™ ×‘×¡×“×¨ ×¢×•×œ×”: 12, 18, ?, 30",
                        answers: ["20", "22", "24", "26"],
                        correct: 2,
                        explanation: "× ×”×“×¨ ×¢×™×“×•! ×”×¡×“×¨×” ×¢×•×œ×” ×‘-6: 12, 18, 24, 30!"
                    },
                    {
                        question: "××™×–×” ××¡×¤×¨ ×—×¡×¨: 10, 20, 30, ?, 50",
                        answers: ["35", "40", "45", "55"],
                        correct: 1,
                        explanation: "××•×©×œ× ×¢×™×“×•! ×”×¡×“×¨×” ×¢×•×œ×” ×‘-10: 40 ×—×¡×¨!"
                    },
                    {
                        question: "×›××” ××¡×¤×¨×™× ×™×© ×‘×™×Ÿ 15 ×œ-20? (×œ× ×›×•×œ×œ 15 ×•-20)",
                        answers: ["3", "4", "5", "6"],
                        correct: 1,
                        explanation: "× ×¤×œ× ×¢×™×“×•! ×‘×™×Ÿ 15 ×œ-20 ×™×© 4 ××¡×¤×¨×™×: 16, 17, 18, 19!"
                    }
                    // 15 ×©××œ×•×ª × ×•×¡×¤×•×ª ×™×ª×•×•×¡×¤×•...
                ],
                medium: [
                    // ××¡×¤×¨×™× ×˜×‘×¢×™×™× - ×¨××” ×‘×™× ×•× ×™×ª
                    {
                        question: "××™×–×” ××¡×¤×¨ ×”×›×™ ×’×“×•×œ?",
                        answers: ["234", "324", "243", "342"],
                        correct: 3,
                        explanation: "××¢×•×œ×” ×¢×™×“×•! 342 ×”×•× ×”×’×“×•×œ ×‘×™×•×ª×¨!"
                    },
                    {
                        question: "×›××” ×××•×ª ×™×© ×‘××¡×¤×¨ 456?",
                        answers: ["4", "5", "6", "400"],
                        correct: 0,
                        explanation: "× ×”×“×¨ ×¢×™×“×•! ×‘××¡×¤×¨ 456 ×™×© 4 ×××•×ª!"
                    }
                    // 28 ×©××œ×•×ª × ×•×¡×¤×•×ª...
                ],
                hard: [
                    // ××¡×¤×¨×™× ×˜×‘×¢×™×™× - ×¨××” ×§×©×”
                    {
                        question: "××™×–×” ××¡×¤×¨ ×–×•×’×™ ×”×›×™ ×§×¨×•×‘ ×œ-837?",
                        answers: ["836", "838", "835", "839"],
                        correct: 0,
                        explanation: "××“×”×™× ×¢×™×“×•! 836 ×”×•× ××¡×¤×¨ ×–×•×’×™ ×•×”×›×™ ×§×¨×•×‘ ×œ-837!"
                    }
                    // 29 ×©××œ×•×ª × ×•×¡×¤×•×ª...
                ]
            },
            operations: {
                easy: [
                    // ×¤×¢×•×œ×•×ª ×—×©×‘×•×Ÿ - ×¨××” ×§×œ×”
                    {
                        question: "×—×©×‘: <span class='math-text'>7 + 5</span>",
                        answers: ["11", "12", "13", "14"],
                        correct: 1,
                        explanation: "× ×”×“×¨ ×¢×™×“×•! 7 + 5 = 12. ×–×” ×›××• ×œ××¡×•×£ × ×§×•×“×•×ª ×›×•×— ×™×—×“!"
                    },
                    {
                        question: "×—×©×‘: <span class='math-text'>15 - 8</span>",
                        answers: ["6", "7", "8", "9"],
                        correct: 1,
                        explanation: "××¢×•×œ×” ×¢×™×“×•! 15 - 8 = 7. ×—×™×©×•×‘ ××•×©×œ×!"
                    },
                    {
                        question: "×—×©×‘: <span class='math-text'>2 Ã— 5</span>",
                        answers: ["8", "10", "12", "15"],
                        correct: 1,
                        explanation: "××“×”×™× ×¢×™×“×•! 2 Ã— 5 = 10. ×–×” ×›××• ×©×ª×™ ×§×‘×•×¦×•×ª ×©×œ 5!"
                    },
                    {
                        question: "×—×©×‘: <span class='math-text'>10 Ã· 2</span>",
                        answers: ["4", "5", "6", "8"],
                        correct: 1,
                        explanation: "× ×¤×œ× ×¢×™×“×•! 10 Ã· 2 = 5. ×–×” ×›××• ×œ×—×œ×§ 10 × ×§×•×“×•×ª ×œ×©× ×™ ×—×œ×§×™×!"
                    }
                    // 26 ×©××œ×•×ª × ×•×¡×¤×•×ª...
                ],
                medium: [
                    // ×¤×¢×•×œ×•×ª ×—×©×‘×•×Ÿ - ×¨××” ×‘×™× ×•× ×™×ª
                    {
                        question: "×—×©×‘: <span class='math-text'>47 + 28</span>",
                        answers: ["73", "74", "75", "76"],
                        correct: 2,
                        explanation: "××“×”×™× ×¢×™×“×•! 47 + 28 = 75. ×™×© ××¢×‘×¨ ×¢×©×¨×•×ª: 7+8=15!"
                    },
                    {
                        question: "×—×©×‘: <span class='math-text'>7 Ã— 8</span>",
                        answers: ["54", "55", "56", "57"],
                        correct: 2,
                        explanation: "××“×”×™× ×¢×™×“×•! 7 Ã— 8 = 56. ×˜×™×¤: ×—×©×•×‘ 7Ã—10=70, ×•×ª×—×¡×¨ 7Ã—2=14!"
                    }
                    // 28 ×©××œ×•×ª × ×•×¡×¤×•×ª...
                ],
                hard: [
                    // ×¤×¢×•×œ×•×ª ×—×©×‘×•×Ÿ - ×¨××” ×§×©×”
                    {
                        question: "×—×©×‘: <span class='math-text'>234 + 189</span>",
                        answers: ["413", "423", "433", "443"],
                        correct: 1,
                        explanation: "××•×©×œ× ×¢×™×“×•! 234 + 189 = 423. ×—×™×‘×•×¨ ××ª×§×“× ×¢× ××¢×‘×¨!"
                    }
                    // 29 ×©××œ×•×ª × ×•×¡×¤×•×ª...
                ]
            },
            geometry: {
                easy: [
                    // ×’××•××˜×¨×™×” - ×¨××” ×§×œ×”
                    {
                        question: "×ª×¡×ª×›×œ ×¢×œ ×”×–×•×•×™×ª ×‘×¦×™×•×¨. ××™×–×” ×¡×•×’ ×–×•×•×™×ª ×–×•?",
                        answers: ["×–×•×•×™×ª ×—×“×”", "×–×•×•×™×ª ×™×©×¨×”", "×–×•×•×™×ª ×§×”×”", "×–×•×•×™×ª ×©×˜×•×—×”"],
                        correct: 1,
                        explanation: "× ×”×“×¨ ×¢×™×“×•! ×–×• ×–×•×•×™×ª ×™×©×¨×” - 90 ××¢×œ×•×ª, ×›××• ×¤×™× ×ª ×¨×™×‘×•×¢!",
                        svg: `<svg width="200" height="150" viewBox="0 0 200 150">
                            <line x1="50" y1="100" x2="150" y2="100" stroke="#0284c7" stroke-width="3"/>
                            <line x1="100" y1="50" x2="100" y2="100" stroke="#0284c7" stroke-width="3"/>
                            <path d="M 85 100 L 85 85 L 100 85" stroke="#10b981" stroke-width="2" fill="none"/>
                            <text x="105" y="75" fill="#0284c7" font-size="14" font-weight="bold">90Â°</text>
                        </svg>`
                    },
                    {
                        question: "××™×–×” ×¡×•×’ ×–×•×•×™×ª ××ª ×¨×•××” ×‘×¦×™×•×¨?",
                        answers: ["×–×•×•×™×ª ×—×“×”", "×–×•×•×™×ª ×™×©×¨×”", "×–×•×•×™×ª ×§×”×”", "×–×•×•×™×ª ×©×˜×•×—×”"],
                        correct: 0,
                        explanation: "××¢×•×œ×” ×¢×™×“×•! ×–×• ×–×•×•×™×ª ×—×“×” - ×¤×—×•×ª ×-90 ××¢×œ×•×ª, ×›××• ×—×•×“ ×¢×™×¤×¨×•×Ÿ!",
                        svg: `<svg width="200" height="150" viewBox="0 0 200 150">
                            <line x1="50" y1="100" x2="150" y2="100" stroke="#0284c7" stroke-width="3"/>
                            <line x1="100" y1="70" x2="100" y2="100" stroke="#0284c7" stroke-width="3"/>
                            <path d="M 85 100 L 85 90 L 95 90" stroke="#10b981" stroke-width="2" fill="none"/>
                            <text x="105" y="85" fill="#0284c7" font-size="14" font-weight="bold">45Â°</text>
                        </svg>`
                    }
                    // 28 ×©××œ×•×ª × ×•×¡×¤×•×ª ×¢× SVG...
                ],
                medium: [
                    // ×’××•××˜×¨×™×” - ×¨××” ×‘×™× ×•× ×™×ª
                    {
                        question: "×›××” ××¢×œ×•×ª ×™×© ×‘×–×•×•×™×ª ×™×©×¨×”?",
                        answers: ["45 ××¢×œ×•×ª", "90 ××¢×œ×•×ª", "180 ××¢×œ×•×ª", "360 ××¢×œ×•×ª"],
                        correct: 1,
                        explanation: "× ×”×“×¨ ×¢×™×“×•! ×‘×–×•×•×™×ª ×™×©×¨×” ×™×© 90 ××¢×œ×•×ª - ×›××• ×¤×™× ×ª ×¨×™×‘×•×¢!"
                    }
                    // 29 ×©××œ×•×ª × ×•×¡×¤×•×ª...
                ],
                hard: [
                    // ×’××•××˜×¨×™×” - ×¨××” ×§×©×”
                    {
                        question: "×”××©×•×œ×© ×‘×¦×™×•×¨ ×”×•×:",
                        answers: ["××©×•×œ×© ×—×“ ×–×•×•×™×ª", "××©×•×œ×© ×™×©×¨ ×–×•×•×™×ª", "××©×•×œ×© ×§×”×” ×–×•×•×™×ª", "×œ× ××©×•×œ×©"],
                        correct: 1,
                        explanation: "××“×”×™× ×¢×™×“×•! ×–×” ××©×•×œ×© ×™×©×¨ ×–×•×•×™×ª - ×™×© ×œ×• ×–×•×•×™×ª ×©×œ 90 ××¢×œ×•×ª!"
                    }
                    // 29 ×©××œ×•×ª × ×•×¡×¤×•×ª ×¢× SVG ××©×•×œ×©×™×...
                ]
            }
        };
        
        // ××ª×—×•×œ ×”××©×—×§
        function initGame() {
            createStars();
            showScreen('subjectSelection');
        }
        
        // ×™×¦×™×¨×ª ×›×•×›×‘×™× ×‘×¨×§×¢
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const numberOfStars = 20;
            
            for (let i = 0; i < numberOfStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.innerHTML = 'âš¡';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                starsContainer.appendChild(star);
            }
        }
        
        // ×”×¦×’×ª ××¡×š
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }
        
        // ×‘×—×™×¨×ª × ×•×©×
        function selectSubject(subject) {
            currentSubject = subject;
            
            const subjectTitles = {
                'numbers': 'ğŸ”¢ ××¡×¤×¨×™× ×˜×‘×¢×™×™× ×—×–×§×™×',
                'operations': 'â•â–âœ–ï¸â— ×¤×¢×•×œ×•×ª ×”×—×©×‘×•×Ÿ ×”××ª×§×“××•×ª',
                'geometry': 'ğŸ“ ×’××•××˜×¨×™×” ××ª×§×“××ª ×¢× ×¦×™×•×¨×™×!'
            };
            
            document.getElementById('subjectTitle').innerHTML = 
                `${subjectTitles[subject]}<br>×‘×—×¨ ×¨××ª ×§×•×©×™ ×¢×‘×•×¨ ×”× ×•×©× ×©×œ×š âš¡`;
                
            showScreen('difficultySelection');
        }
        
        function backToSubjects() {
            showScreen('subjectSelection');
        }
        
        // ×‘×—×™×¨×ª ×¨××ª ×§×•×©×™
        function selectDifficulty(difficulty) {
            currentDifficulty = difficulty;
            startGame();
        }
        
        function backToDifficulty() {
            showScreen('difficultySelection');
        }
        
        // ×”×ª×—×œ×ª ×”××©×—×§
        function startGame() {
            currentQuestionIndex = 0;
            correctAnswers = 0;
            answeredCorrectly = false;
            
            const subjectQuestions = questionBank[currentSubject][currentDifficulty];
            
            // ×™×¦×™×¨×ª 30 ×©××œ×•×ª (×—×–×¨×” ×¢×œ ×©××œ×•×ª ×§×™×™××•×ª ×× ×¦×¨×™×š)
            currentQuestions = [];
            while (currentQuestions.length < 30) {
                const shuffledQuestions = [...subjectQuestions].sort(() => Math.random() - 0.5);
                currentQuestions = currentQuestions.concat(shuffledQuestions);
            }
            currentQuestions = currentQuestions.slice(0, 30);
            
            showScreen('gameScreen');
            displayQuestion();
        }
        
        // ×”×¦×’×ª ×©××œ×”
        function displayQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            
            document.getElementById('questionProgress').textContent = 
                `×©××œ×” ${currentQuestionIndex + 1} ××ª×•×š ${currentQuestions.length}`;
            
            document.getElementById('questionText').innerHTML = question.question;
            
            const geometryVisual = document.getElementById('geometryVisual');
            if (currentSubject === 'geometry' && question.svg) {
                geometryVisual.innerHTML = question.svg;
                geometryVisual.style.display = 'block';
            } else {
                geometryVisual.style.display = 'none';
            }
            
            const answersGrid = document.getElementById('answersGrid');
            answersGrid.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'answer-button';
                button.innerHTML = answer;
                button.onclick = () => selectAnswer(index);
                answersGrid.appendChild(button);
            });
            
            document.getElementById('feedback').classList.remove('show');
            answeredCorrectly = false;
        }
        
        // ×‘×—×™×¨×ª ×ª×©×•×‘×”
        function selectAnswer(selectedIndex) {
            if (answeredCorrectly) return;
            
            const question = currentQuestions[currentQuestionIndex];
            const buttons = document.querySelectorAll('.answer-button');
            const feedback = document.getElementById('feedback');
            const feedbackText = document.getElementById('feedbackText');
            
            answeredCorrectly = true;
            
            buttons.forEach((button, index) => {
                button.disabled = true;
                if (index === question.correct) {
                    button.classList.add('correct');
                } else if (index === selectedIndex && selectedIndex !== question.correct) {
                    button.classList.add('wrong');
                }
            });
            
            if (selectedIndex === question.correct) {
                correctAnswers++;
                feedback.className = 'feedback show correct';
                feedbackText.innerHTML = question.explanation;
                createFireworks();
            } else {
                feedback.className = 'feedback show wrong';
                feedbackText.innerHTML = `×œ× × ×•×¨× ×¢×™×“×•! ${question.explanation}`;
            }
        }
        
        // ××¢×‘×¨ ×œ×©××œ×” ×”×‘××”
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex >= currentQuestions.length) {
                showCompletion();
            } else {
                displayQuestion();
            }
        }
        
        // ×™×¦×™×¨×ª ×–×™×§×•×§×™×
        function createFireworks() {
            const fireworksContainer = document.getElementById('fireworks');
            const emojis = ['âš¡', 'ğŸŒŸ', 'â­', 'ğŸ’«', 'ğŸ‰', 'ğŸŠ'];
            
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    firework.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
                    firework.style.left = Math.random() * 100 + '%';
                    firework.style.top = Math.random() * 100 + '%';
                    fireworksContainer.appendChild(firework);
                    
                    setTimeout(() => {
                        firework.remove();
                    }, 1000);
                }, i * 100);
            }
        }
        
        // ×”×¦×’×ª ××¡×š ×¡×™×•×
        function showCompletion() {
            const completionMessage = document.getElementById('completionMessage');
            const percentage = Math.round((correctAnswers / currentQuestions.length) * 100);
            
            let message = '';
            if (percentage >= 90) {
                message = `ğŸŒŸ ××“×”×™× ×¢×™×“×•! ×¢× ×™×ª × ×›×•×Ÿ ×¢×œ ${correctAnswers} ××ª×•×š ${currentQuestions.length} ×©××œ×•×ª (${percentage}%)! ××ª×” ×’××•×Ÿ ×‘××ª××˜×™×§×”! ğŸ†`;
            } else if (percentage >= 75) {
                message = `â­ ×›×œ ×”×›×‘×•×“ ×¢×™×“×•! ×¢× ×™×ª × ×›×•×Ÿ ×¢×œ ${correctAnswers} ××ª×•×š ${currentQuestions.length} ×©××œ×•×ª (${percentage}%)! ××ª×” ××ª×§×“× × ×”×“×¨! ğŸ’ª`;
            } else if (percentage >= 60) {
                message = `ğŸ’™ ×™×¤×” ×¢×™×“×•! ×¢× ×™×ª × ×›×•×Ÿ ×¢×œ ${correctAnswers} ××ª×•×š ${currentQuestions.length} ×©××œ×•×ª (${percentage}%)! ×›×“××™ ×œ×”×ª×¨×’×œ ×¢×•×“ ×§×¦×ª! ğŸ“š`;
            } else {
                message = `ğŸŒŠ ×¢×™×“×• ×”× ×”×“×¨! ×¢× ×™×ª × ×›×•×Ÿ ×¢×œ ${correctAnswers} ××ª×•×š ${currentQuestions.length} ×©××œ×•×ª (${percentage}%)! ×‘×•× × ×ª×¨×’×œ ×™×—×“ ×¢×•×“! ğŸ’™`;
            }
            
            completionMessage.innerHTML = message;
            showScreen('completionScreen');
            
            setTimeout(createFireworks, 500);
        }
        
        // ×”×ª×—×œ×” ××—×“×©
        function restartGame() {
            showScreen('subjectSelection');
        }
        
        function playAgain() {
            startGame();
        }
        
        // ××ª×—×•×œ ×”××©×—×§ ×›×©×”×“×£ × ×˜×¢×Ÿ
        window.onload = initGame;
    </script>
</body>
</html>